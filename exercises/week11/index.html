<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Creating Seussology App - Part 3 | MTM6331</title>
    <meta name="description" content="Server Side Web Development">
    
    
    <link rel="preload" href="/assets/css/0.styles.5ebb4f39.css" as="style"><link rel="preload" href="/assets/js/app.51be034c.js" as="script"><link rel="preload" href="/assets/js/9.509ebe2b.js" as="script"><link rel="prefetch" href="/assets/js/40.1b28fcf8.js"><link rel="prefetch" href="/assets/js/2.cda51ec0.js"><link rel="prefetch" href="/assets/js/3.d64c51b0.js"><link rel="prefetch" href="/assets/js/4.59e0ffb1.js"><link rel="prefetch" href="/assets/js/5.ba53a2d6.js"><link rel="prefetch" href="/assets/js/6.4ee3be8a.js"><link rel="prefetch" href="/assets/js/7.a9013374.js"><link rel="prefetch" href="/assets/js/8.531b62ae.js"><link rel="prefetch" href="/assets/js/10.5fab054e.js"><link rel="prefetch" href="/assets/js/11.e6a23749.js"><link rel="prefetch" href="/assets/js/12.345252a5.js"><link rel="prefetch" href="/assets/js/13.5f9562e2.js"><link rel="prefetch" href="/assets/js/14.51623141.js"><link rel="prefetch" href="/assets/js/15.ab21c475.js"><link rel="prefetch" href="/assets/js/16.0be7b64b.js"><link rel="prefetch" href="/assets/js/17.2517f7ab.js"><link rel="prefetch" href="/assets/js/18.ed363fd6.js"><link rel="prefetch" href="/assets/js/19.1a1818d8.js"><link rel="prefetch" href="/assets/js/20.080c560c.js"><link rel="prefetch" href="/assets/js/21.428e7336.js"><link rel="prefetch" href="/assets/js/22.57f797e7.js"><link rel="prefetch" href="/assets/js/23.b541bd45.js"><link rel="prefetch" href="/assets/js/24.b920db0c.js"><link rel="prefetch" href="/assets/js/25.d6e00bbb.js"><link rel="prefetch" href="/assets/js/26.167a6833.js"><link rel="prefetch" href="/assets/js/27.7038c488.js"><link rel="prefetch" href="/assets/js/28.5c3e2955.js"><link rel="prefetch" href="/assets/js/29.a41ee87b.js"><link rel="prefetch" href="/assets/js/30.dfb172a7.js"><link rel="prefetch" href="/assets/js/31.36f3b78a.js"><link rel="prefetch" href="/assets/js/32.ee4a1e2d.js"><link rel="prefetch" href="/assets/js/33.2552c081.js"><link rel="prefetch" href="/assets/js/34.823d6485.js"><link rel="prefetch" href="/assets/js/35.8a8876c5.js"><link rel="prefetch" href="/assets/js/36.ea700b39.js"><link rel="prefetch" href="/assets/js/37.3aa4851a.js"><link rel="prefetch" href="/assets/js/38.1449eed6.js"><link rel="prefetch" href="/assets/js/39.368ee037.js"><link rel="prefetch" href="/assets/js/41.3a820fed.js"><link rel="prefetch" href="/assets/js/42.542e2119.js"><link rel="prefetch" href="/assets/js/43.c4771cb3.js"><link rel="prefetch" href="/assets/js/44.62fd2343.js"><link rel="prefetch" href="/assets/js/45.bf231005.js"><link rel="prefetch" href="/assets/js/46.9d379b34.js"><link rel="prefetch" href="/assets/js/47.62f9cd10.js"><link rel="prefetch" href="/assets/js/48.2b8e7939.js"><link rel="prefetch" href="/assets/js/49.01336055.js"><link rel="prefetch" href="/assets/js/50.86851bbf.js"><link rel="prefetch" href="/assets/js/51.9ac02cbe.js"><link rel="prefetch" href="/assets/js/52.9fc3bd98.js"><link rel="prefetch" href="/assets/js/53.86b466fc.js"><link rel="prefetch" href="/assets/js/54.d0b3d0aa.js"><link rel="prefetch" href="/assets/js/55.67e1ac64.js"><link rel="prefetch" href="/assets/js/56.431997ce.js"><link rel="prefetch" href="/assets/js/57.bbefb90c.js"><link rel="prefetch" href="/assets/js/58.b411fd87.js"><link rel="prefetch" href="/assets/js/59.9b95031d.js"><link rel="prefetch" href="/assets/js/60.71efe267.js"><link rel="prefetch" href="/assets/js/61.5d3d7526.js"><link rel="prefetch" href="/assets/js/62.b569c253.js"><link rel="prefetch" href="/assets/js/63.30826c74.js"><link rel="prefetch" href="/assets/js/64.8a6dc08a.js"><link rel="prefetch" href="/assets/js/65.aaf1b955.js"><link rel="prefetch" href="/assets/js/66.69d634a6.js"><link rel="prefetch" href="/assets/js/67.055e4a3a.js"><link rel="prefetch" href="/assets/js/68.92c4f2fb.js"><link rel="prefetch" href="/assets/js/69.13b34dda.js"><link rel="prefetch" href="/assets/js/70.1da6fecb.js"><link rel="prefetch" href="/assets/js/71.f2a61f21.js"><link rel="prefetch" href="/assets/js/72.3d518d33.js"><link rel="prefetch" href="/assets/js/73.bc291ce2.js"><link rel="prefetch" href="/assets/js/74.9973e925.js"><link rel="prefetch" href="/assets/js/75.5c3cff77.js"><link rel="prefetch" href="/assets/js/76.4f6dbff3.js"><link rel="prefetch" href="/assets/js/77.cdfe209b.js"><link rel="prefetch" href="/assets/js/78.fe32a3f2.js"><link rel="prefetch" href="/assets/js/79.53bcac61.js"><link rel="prefetch" href="/assets/js/80.cc347b2b.js"><link rel="prefetch" href="/assets/js/81.dc5be549.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5ebb4f39.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">MTM6331</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/modules/" class="nav-link">Modules</a></div><div class="nav-item"><a href="/assignments/" class="nav-link">Assignments</a></div><div class="nav-item"><a href="/resources/" class="nav-link">Resources</a></div><div class="nav-item"><a href="/recordings/" class="nav-link">Recordings</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/modules/" class="nav-link">Modules</a></div><div class="nav-item"><a href="/assignments/" class="nav-link">Assignments</a></div><div class="nav-item"><a href="/resources/" class="nav-link">Resources</a></div><div class="nav-item"><a href="/recordings/" class="nav-link">Recordings</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Creating Seussology App - Part 3</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/exercises/week11/#download-the-completed-project" class="sidebar-link">Download the Completed Project</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/exercises/week11/#get-insomnia" class="sidebar-link">Get Insomnia</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/exercises/week11/#creating-an-api" class="sidebar-link">Creating an API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/exercises/week11/#setting-the-api-routes" class="sidebar-link">Setting the API Routes</a></li><li class="sidebar-sub-header"><a href="/exercises/week11/#updating-the-controller" class="sidebar-link">Updating the Controller</a></li><li class="sidebar-sub-header"><a href="/exercises/week11/#testing-in-insomnia" class="sidebar-link">Testing in Insomnia</a></li><li class="sidebar-sub-header"><a href="/exercises/week11/#updating-the-controller-methods" class="sidebar-link">Updating the Controller Methods</a></li><li class="sidebar-sub-header"><a href="/exercises/week11/#testing-the-api-in-insomnia" class="sidebar-link">Testing the API in Insomnia</a></li></ul></li><li><a href="/exercises/week11/#creating-a-spa" class="sidebar-link">Creating a SPA</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/exercises/week11/#creating-the-view" class="sidebar-link">Creating the View</a></li><li class="sidebar-sub-header"><a href="/exercises/week11/#creating-the-books-page" class="sidebar-link">Creating the Books Page</a></li><li class="sidebar-sub-header"><a href="/exercises/week11/#creating-the-book-details-page" class="sidebar-link">Creating the Book Details Page</a></li><li class="sidebar-sub-header"><a href="/exercises/week11/#creating-a-javascript-navigation-system" class="sidebar-link">Creating a JavaScript Navigation System</a></li><li class="sidebar-sub-header"><a href="/exercises/week11/#adding-and-updating-data" class="sidebar-link">Adding and Updating Data</a></li><li class="sidebar-sub-header"><a href="/exercises/week11/#removing-data" class="sidebar-link">Removing Data</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="creating-seussology-app-part-3"><a href="#creating-seussology-app-part-3" aria-hidden="true" class="header-anchor">#</a> Creating Seussology App - Part 3</h1> <h2 id="download-the-completed-project"><a href="#download-the-completed-project" aria-hidden="true" class="header-anchor">#</a> Download the Completed Project</h2> <p>Download the <a href="/documents/seussology-final.zip">Seussology Files</a>.</p> <p>Unzip the file and copy the <code>app</code>, <code>public</code>, <code>resources</code>, and <code>routes</code> folders replace the existing folders in your laravel project.</p> <h2 id="get-insomnia"><a href="#get-insomnia" aria-hidden="true" class="header-anchor">#</a> Get Insomnia</h2> <p>For today exercise, we will be using the Insomnia REST client. It will make it easier to test our application.</p> <h4 id="go-to-https-insomnia-rest-to-download-the-software"><a href="#go-to-https-insomnia-rest-to-download-the-software" aria-hidden="true" class="header-anchor">#</a> Go to <a href="https://insomnia.rest/" target="_blank" rel="noopener noreferrer">https://insomnia.rest/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to download the software</h4> <h2 id="creating-an-api"><a href="#creating-an-api" aria-hidden="true" class="header-anchor">#</a> Creating an API</h2> <h3 id="setting-the-api-routes"><a href="#setting-the-api-routes" aria-hidden="true" class="header-anchor">#</a> Setting the API Routes</h3> <h4 id="_1-open-api-php-in-the-routes-directory"><a href="#_1-open-api-php-in-the-routes-directory" aria-hidden="true" class="header-anchor">#</a> 1. Open <code>api.php</code> in the <code>routes</code> directory</h4> <h4 id="_2-add-the-routes"><a href="#_2-add-the-routes" aria-hidden="true" class="header-anchor">#</a> 2. Add the routes</h4> <p>Add the following routes to <code>api.php</code></p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/books'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'BooksController@index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/books/{id}'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'BooksController@show'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/books'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'BooksController@store'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/books/{book}'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'BooksController@update'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/books/{id}'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'BooksController@delete'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="updating-the-controller"><a href="#updating-the-controller" aria-hidden="true" class="header-anchor">#</a> Updating the Controller</h3> <p>Because we are creating an API, the controller will return only the raw data instead of a view.</p> <h4 id="_1-open-bookscontroller-php-in-the-app-http-controllers-directory"><a href="#_1-open-bookscontroller-php-in-the-app-http-controllers-directory" aria-hidden="true" class="header-anchor">#</a> 1. Open <code>BooksController.php</code> in the <code>app/Http/Controllers</code> directory</h4> <h4 id="_2-update-the-index-method"><a href="#_2-update-the-index-method" aria-hidden="true" class="header-anchor">#</a> 2. Update the <code>index()</code> method</h4> <p>Replace the return statement, so that it will return raw JSON data instead of the <code>books</code> view.</p> <div class="warning custom-block"><p class="custom-block-title">Note</p> <p>It is recommend to comment out the old return statement, instead of deleting it.</p></div> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> index <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$books</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// return view('books', ['books' =&gt; $books]);</span>
    <span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token variable">$books</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="testing-in-insomnia"><a href="#testing-in-insomnia" aria-hidden="true" class="header-anchor">#</a> Testing in Insomnia</h3> <p>Test the <code>/books</code> API in Insomnia</p> <h4 id="_1-open-insomnia"><a href="#_1-open-insomnia" aria-hidden="true" class="header-anchor">#</a> 1. Open Insomnia</h4> <p><img src="/images/exercises/insomnia-open.png" alt="Open Insomnia"></p> <h4 id="_2-create-a-new-request"><a href="#_2-create-a-new-request" aria-hidden="true" class="header-anchor">#</a> 2. Create a New Request</h4> <p>Create a new request name it &quot;GET BOOKS&quot; and click create.</p> <p><img src="/images/exercises/insomnia-new-request.png" alt="New Request"></p> <h4 id="_3-add-the-url"><a href="#_3-add-the-url" aria-hidden="true" class="header-anchor">#</a> 3. Add the URL</h4> <p>Add the URL, <code>http://mtm6331-laravel.local/api/books</code> to the GET BOOKS request</p> <p><img src="/images/exercises/insomnia-add-url.png" alt="Add URL"></p> <h4 id="_4-send-the-request"><a href="#_4-send-the-request" aria-hidden="true" class="header-anchor">#</a> 4. Send the request</h4> <p>Send the request by clicking on the send button. The response should appear on the right.</p> <p><img src="/images/exercises/insomnia-send-request.png" alt="Send Request"></p> <h3 id="updating-the-controller-methods"><a href="#updating-the-controller-methods" aria-hidden="true" class="header-anchor">#</a> Updating the Controller Methods</h3> <h4 id="_1-open-bookscontroller-php-in-the-app-http-controllers-directory-2"><a href="#_1-open-bookscontroller-php-in-the-app-http-controllers-directory-2" aria-hidden="true" class="header-anchor">#</a> 1. Open <code>BooksController.php</code> in the <code>app/Http/Controllers</code> directory</h4> <h4 id="_2-update-the-show-method"><a href="#_2-update-the-show-method" aria-hidden="true" class="header-anchor">#</a> 2. Update the <code>show()</code> method</h4> <p>Add the <code>$quotes</code> to the <code>$book</code> array and replace the return statement so that raw JSON is returned.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> show <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$quotes</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">quotes</span><span class="token punctuation">;</span>
    <span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'quotes'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$quotes</span><span class="token punctuation">;</span>
    <span class="token comment">//return view('book', ['book' =&gt; $book, 'quotes' =&gt; $quotes]);</span>
    <span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token variable">$book</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-update-the-update-method"><a href="#_3-update-the-update-method" aria-hidden="true" class="header-anchor">#</a> 3. Update the <code>update()</code> method</h4> <p>Replace the return statement so that raw JSON is returned</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> update <span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">,</span> Book <span class="token variable">$book</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$book</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//return $this-&gt;edit($id);</span>
    <span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token variable">$book</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_4-update-the-delete-method"><a href="#_4-update-the-delete-method" aria-hidden="true" class="header-anchor">#</a> 4. Update the <code>delete()</code> method</h4> <p>Replace the return statement so that no content is returned with a 204 code.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> delete <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$book</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// return view('delete', ['title' =&gt; $book['book_title']]);</span>
    <span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">204</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="testing-the-api-in-insomnia"><a href="#testing-the-api-in-insomnia" aria-hidden="true" class="header-anchor">#</a> Testing the API in Insomnia</h3> <h4 id="_1-add-the-get-book-request"><a href="#_1-add-the-get-book-request" aria-hidden="true" class="header-anchor">#</a> 1. Add the &quot;GET BOOK&quot; request</h4> <p>Create a new request with the name &quot;GET BOOK&quot;. Set the url to <code>http://mtm6331-laravel.local/api/books/13</code></p> <p>Test the request by clicking the &quot;Send&quot; button.</p> <h4 id="_2-add-the-post-book-request"><a href="#_2-add-the-post-book-request" aria-hidden="true" class="header-anchor">#</a> 2. Add the &quot;POST BOOK&quot; request</h4> <p>Create a new request with the name &quot;POST BOOK&quot;. Set the url to <code>http://mtm6331-laravel.local/api/books</code> and set method to <code>POST</code></p> <p>Set the body to <code>JSON</code> and add the following:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
  <span class="token property">&quot;book_title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;In a People House&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;book_title_sort&quot;</span><span class="token operator">:</span> <span class="token string">&quot;In a People House&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;book_year&quot;</span><span class="token operator">:</span> <span class="token number">1970</span><span class="token punctuation">,</span>
  <span class="token property">&quot;book_description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Learn what there is in a people house.&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;book_pages&quot;</span><span class="token operator">:</span> <span class="token number">36</span><span class="token punctuation">,</span>
  <span class="token property">&quot;category_id&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Test the request by clicking the &quot;Send&quot; button.</p> <h4 id="_3-add-the-put-book-request"><a href="#_3-add-the-put-book-request" aria-hidden="true" class="header-anchor">#</a> 3. Add the &quot;PUT BOOK&quot; request</h4> <p>Create a new request with the name &quot;PUT BOOK&quot;. Set the url to <code>http://mtm6331-laravel.local/api/books/50</code> and set method to <code>PUT</code>.</p> <p>Set the body to <code>JSON</code> and add the following:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;book_year&quot;</span><span class="token operator">:</span> <span class="token number">1972</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Test the request by clicking the &quot;Send&quot; button.</p> <h4 id="_4-add-the-delete-book-request"><a href="#_4-add-the-delete-book-request" aria-hidden="true" class="header-anchor">#</a> 4. Add the &quot;DELETE BOOK&quot; request</h4> <p>Create a new request with the name &quot;DELETE POST&quot;. Set the url to <code>http://mtm6331-laravel.local/api/books/50</code> and set method to <code>DELETE</code>.</p> <p>Test the request by clicking the &quot;Send&quot; button.</p> <h2 id="creating-a-spa"><a href="#creating-a-spa" aria-hidden="true" class="header-anchor">#</a> Creating a SPA</h2> <p>A Single Page Application uses JavaScript to update all the page content to avoid any page refresh.</p> <h3 id="creating-the-view"><a href="#creating-the-view" aria-hidden="true" class="header-anchor">#</a> Creating the View</h3> <h4 id="_1-create-a-new-file-in-resources-views-named-spa-blade-php"><a href="#_1-create-a-new-file-in-resources-views-named-spa-blade-php" aria-hidden="true" class="header-anchor">#</a> 1. Create a new file in <code>resources/views</code> named <code>spa.blade.php</code></h4> <p>Enter the following HTML into the file.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Seussology SPA<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://use.fontawesome.com/releases/v5.4.2/css/all.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">integrity</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>sha384-/rXc/GQVaYpyDdyxK+ecHPVYJSN9bmVFBvjA/9eOB+pb3F2w2N6fc5qB9Ew5yIns<span class="token punctuation">&quot;</span></span> <span class="token attr-name">crossorigin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>anonymous<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/css/seussology.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>nav<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/quotes<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>nav-link<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Quotes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>nav-link<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>logo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>nav-image<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/images/seussology-logo.svg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Seussology<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/books/new/<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>nav-link <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>New Book<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>header-title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Books<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>books<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>


    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/js/seussology.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_2-open-web-php-in-the-routes-directory"><a href="#_2-open-web-php-in-the-routes-directory" aria-hidden="true" class="header-anchor">#</a> 2. Open <code>web.php</code> in the <code>routes</code> directory</h4> <h4 id="_3-update-the-index-route"><a href="#_3-update-the-index-route" aria-hidden="true" class="header-anchor">#</a> 3. Update the <code>index</code> route</h4> <p>Update the <code>index</code> route to load the <code>spa</code> view for all the possible urls</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/{books?}/{id?}'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'spa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="creating-the-books-page"><a href="#creating-the-books-page" aria-hidden="true" class="header-anchor">#</a> Creating the Books Page</h3> <p>Retrieve the books data from the API and dynamically create the HTML using JavaScript.</p> <h4 id="_1-create-a-new-file-in-public-js-directory-with-the-name-seussology-js"><a href="#_1-create-a-new-file-in-public-js-directory-with-the-name-seussology-js" aria-hidden="true" class="header-anchor">#</a> 1. Create a new file in <code>public/js</code> directory with the name <code>seussology.js</code></h4> <h4 id="_2-retrieve-the-dom-elements"><a href="#_2-retrieve-the-dom-elements" aria-hidden="true" class="header-anchor">#</a> 2. Retrieve the DOM elements</h4> <p>Retrieve the <code>&lt;main&gt;</code> tag and the page title.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> main <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'main'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> title <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_3-create-a-routes-object"><a href="#_3-create-a-routes-object" aria-hidden="true" class="header-anchor">#</a> 3. Create a routes object</h4> <p>Create a routes object that will hold the application routes and related functions.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">'/'</span><span class="token punctuation">:</span> getBooks
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_4-create-a-templates-object"><a href="#_4-create-a-templates-object" aria-hidden="true" class="header-anchor">#</a> 4. Create a templates object</h4> <p>Create a template object that will hold the HTML templates for each view. Each template will be a function.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> templates <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">'books'</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>books<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> books<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>book <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token string">`
      &lt;div class=&quot;book&quot;&gt;
        &lt;a class=&quot;book-image&quot; data-id=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>book<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; href=&quot;/books/#</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>book<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;&gt;
          &lt;img src=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>book<span class="token punctuation">[</span><span class="token string">'book_image'</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; alt=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>book<span class="token punctuation">[</span><span class="token string">'book_title'</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;&gt;
        &lt;/a&gt;
      &lt;/div&gt;`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_4-create-the-getbooks-function"><a href="#_4-create-the-getbooks-function" aria-hidden="true" class="header-anchor">#</a> 4. Create the <code>getBooks()</code> function</h4> <p>Create the <code>getBooks()</code> function</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getBooks</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><h4 id="_5-retrieve-the-books-data"><a href="#_5-retrieve-the-books-data" aria-hidden="true" class="header-anchor">#</a> 5. Retrieve the books data</h4> <p>Inside the <code>getBooks()</code> function, retrieve the books data using the fetch method.</p> <p>Set the <code>&lt;main&gt;</code> tag class name to <code>books</code> and the page title to <code>Books</code>. Call the <code>books()</code> templates function passing the data retrieved from the fetch method.</p> <div class="language-js extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getBooks</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'http://mtm6331-laravel.local/api/books'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>books<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      title<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Books'</span>
      main<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'books'</span>
      templates<span class="token punctuation">.</span><span class="token function">books</span><span class="token punctuation">(</span>books<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_6-call-the-current-route-function"><a href="#_6-call-the-current-route-function" aria-hidden="true" class="header-anchor">#</a> 6. Call the current route function</h4> <p>Use <code>location.pathname</code> to call the current route function</p> <div class="language-js extra-class"><pre class="language-js"><code>routes<span class="token punctuation">[</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="creating-the-book-details-page"><a href="#creating-the-book-details-page" aria-hidden="true" class="header-anchor">#</a> Creating the Book Details Page</h3> <h4 id="_1-add-a-new-route-to-the-routes-object"><a href="#_1-add-a-new-route-to-the-routes-object" aria-hidden="true" class="header-anchor">#</a> 1. Add a new route to the routes object</h4> <p>Add a new route for the the Book Details page to the routes object and set it to <code>getBook</code></p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">'/'</span><span class="token punctuation">:</span> getBooks<span class="token punctuation">,</span>
  <span class="token string">'/books/'</span><span class="token punctuation">:</span> getBook
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-add-the-book-template-to-the-templates-object"><a href="#_2-add-the-book-template-to-the-templates-object" aria-hidden="true" class="header-anchor">#</a> 2. Add the book template to the templates object</h4> <p>Add a <code>book</code> template as a function inside the templates object</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> templates <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">'books'</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>books<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> books<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>book <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token string">`
      &lt;div class=&quot;book&quot;&gt;
        &lt;a class=&quot;book-image&quot; data-id=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>book<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; href=&quot;/books/#</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>book<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;&gt;
          &lt;img src=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>book<span class="token punctuation">[</span><span class="token string">'book_image'</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; alt=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>book<span class="token punctuation">[</span><span class="token string">'book_title'</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;&gt;
        &lt;/a&gt;
      &lt;/div&gt;`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">'book'</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>book<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token string">`
      &lt;div class=&quot;details-controls&quot;&gt;
        &lt;a href=&quot;/books/edit/#</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>book<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; class=&quot;details-control&quot;&gt;&lt;i class=&quot;far fa-edit&quot;&gt;&lt;/i&gt;&lt;/a&gt;
        &lt;a class=&quot;details-control&quot; data-action=&quot;delete&quot;&gt;&lt;i class=&quot;far fa-trash-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;
      &lt;/div&gt;
      &lt;div class=&quot;details-image&quot;&gt;
          &lt;img src=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>book<span class="token punctuation">[</span><span class="token string">'book_image'</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; alt=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>book<span class="token punctuation">[</span><span class="token string">'book_title'</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;&gt;
      &lt;/div&gt;
      &lt;div&gt;
        &lt;h2 class=&quot;details-title&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>book<span class="token punctuation">[</span><span class="token string">'book_title'</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/h2&gt;
        &lt;p&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>book<span class="token punctuation">[</span><span class="token string">'book_description'</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;
        &lt;p&gt;Published: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>book<span class="token punctuation">[</span><span class="token string">'book_year'</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;br&gt;
        Number of Pages: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>book<span class="token punctuation">[</span><span class="token string">'book_pages'</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;
        </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>book<span class="token punctuation">.</span>quotes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>quote <span class="token operator">=&gt;</span> `
          <span class="token operator">&lt;</span>blockquote <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;details-quote&quot;</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>$<span class="token punctuation">{</span>quote<span class="token punctuation">[</span><span class="token string">'quote'</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;
          &lt;/blockquote&gt;`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>`
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-create-the-getbook-function"><a href="#_3-create-the-getbook-function" aria-hidden="true" class="header-anchor">#</a> 3. Create the <code>getBook()</code> function</h4> <p>Create the <code>getBook()</code> function to retrieve the book data using the fetch method.</p> <p>Set the <code>&lt;main&gt;</code> tag class name to <code>details</code> and the page title to <code>Book Details</code>. Call the <code>book()</code> templates function passing the data retrieved from the fetch method.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getBook</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> index <span class="token operator">=</span> location<span class="token punctuation">.</span>hash<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

  <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`http://mtm6331-laravel.local/api/books/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>book<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      main<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'details'</span>
      title<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Book Details'</span>
      templates<span class="token punctuation">.</span><span class="token function">book</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="creating-a-javascript-navigation-system"><a href="#creating-a-javascript-navigation-system" aria-hidden="true" class="header-anchor">#</a> Creating a JavaScript Navigation System</h3> <h4 id="_1-add-a-event-listener"><a href="#_1-add-a-event-listener" aria-hidden="true" class="header-anchor">#</a> 1. Add a event listener</h4> <p>Add a event listener on the document to listen for any clicks.</p> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-stop-links-and-buttons"><a href="#_2-stop-links-and-buttons" aria-hidden="true" class="header-anchor">#</a> 2. Stop links and buttons</h4> <p>Stop links and buttons from performing they default function.</p> <div class="language-js extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br></div><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_3-check-for-an-anchor-tag"><a href="#_3-check-for-an-anchor-tag" aria-hidden="true" class="header-anchor">#</a> 3. Check for an anchor tag</h4> <p>Check for an anchor tag by using the <code>closest()</code> method and checking for an <code>href</code> attribute.</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> link <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>link <span class="token operator">&amp;&amp;</span> link<span class="token punctuation">.</span>href<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_4-add-a-page-to-the-browser-history"><a href="#_4-add-a-page-to-the-browser-history" aria-hidden="true" class="header-anchor">#</a> 4. Add a page to the browser history</h4> <p>Use the <code>history</code> API and the <code>pushState()</code> function to manually a new page to browser history.</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> link <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>link <span class="token operator">&amp;&amp;</span> link<span class="token punctuation">.</span>href<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    history<span class="token punctuation">.</span><span class="token function">pushState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'Seussology'</span><span class="token punctuation">,</span> link<span class="token punctuation">.</span>href<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_5-display-the-new-content"><a href="#_5-display-the-new-content" aria-hidden="true" class="header-anchor">#</a> 5. Display the new content</h4> <p>Use the <code>routes</code> object to display the new content base on the <code>location.pathname</code></p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> link <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>link <span class="token operator">&amp;&amp;</span> link<span class="token punctuation">.</span>href<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    history<span class="token punctuation">.</span><span class="token function">pushState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'Seussology'</span><span class="token punctuation">,</span> link<span class="token punctuation">.</span>href<span class="token punctuation">)</span>
    routes<span class="token punctuation">[</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="adding-and-updating-data"><a href="#adding-and-updating-data" aria-hidden="true" class="header-anchor">#</a> Adding and Updating Data</h3> <h4 id="_1-add-new-routes-to-the-routes-object"><a href="#_1-add-new-routes-to-the-routes-object" aria-hidden="true" class="header-anchor">#</a> 1. Add new routes to the <code>routes</code> object</h4> <p>Add the following items to the <code>routes</code> object.</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">'/'</span><span class="token punctuation">:</span> getBooks<span class="token punctuation">,</span>
  <span class="token string">'/books/'</span><span class="token punctuation">:</span> getBook<span class="token punctuation">,</span>
  <span class="token string">'/books/new/'</span><span class="token punctuation">:</span> getForm<span class="token punctuation">,</span>
  <span class="token string">'/books/edit/'</span><span class="token punctuation">:</span> getForm
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-add-a-form-template-to-templates-object"><a href="#_2-add-a-form-template-to-templates-object" aria-hidden="true" class="header-anchor">#</a> 2. Add a <code>form</code> template to <code>templates</code> object</h4> <p>Add the a <code>form</code> template to <code>templates</code> object as a function. This template will be used to add new data and update existing data.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'form'</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>book<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> categories <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token string">'Beginner Books'</span><span class="token punctuation">,</span>
    <span class="token string">'Big Books'</span><span class="token punctuation">,</span>
    <span class="token string">'Short Stories'</span>
  <span class="token punctuation">]</span>

  main<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token string">`
    &lt;form id=&quot;form&quot; class=&quot;form&quot; enctype=&quot;multipart/form-data&quot;&gt;
      &lt;div class=&quot;form-group title&quot;&gt;
        &lt;label class=&quot;form-label&quot;&gt;Title&lt;/label&gt;
        &lt;input id=&quot;book_title&quot; class=&quot;form-input&quot; type=&quot;text&quot; name=&quot;title&quot; value=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>book<span class="token punctuation">[</span><span class="token string">'book_title'</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;&gt;
      &lt;/div&gt;

      &lt;div class=&quot;form-group category&quot;&gt;
        &lt;label class=&quot;form-label&quot;&gt;Category&lt;/label&gt;
        &lt;select id=&quot;category_id&quot; class=&quot;form-input&quot;&gt;
          </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>categories<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>cat<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> `<span class="token operator">&lt;</span>option value<span class="token operator">=</span>&quot;$<span class="token punctuation">{</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span>index <span class="token operator">===</span> book<span class="token punctuation">[</span><span class="token string">'category_id'</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token string">'selected = &quot;selected&quot;'</span> <span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cat<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/option&gt;`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-group year&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>label <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-label&quot;</span><span class="token operator">&gt;</span>Published Year<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">&quot;book_year&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-input&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> maxlength<span class="token operator">=</span><span class="token string">&quot;4&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;year&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;${book['book_year']}&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-group pages&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>label <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-label&quot;</span><span class="token operator">&gt;</span>Number <span class="token keyword">of</span> Pages<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">&quot;book_pages&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-input&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;number&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;pages&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;${book['book_pages']}&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-group image&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>label <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-label&quot;</span><span class="token operator">&gt;</span>Cover Image<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">&quot;book_image&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-input&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;image&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;${book['book_image']}&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>


      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-group description&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>label <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-label&quot;</span><span class="token operator">&gt;</span>Description<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>textarea id<span class="token operator">=</span><span class="token string">&quot;book_description&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-input&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;description&quot;</span><span class="token operator">&gt;</span>$<span class="token punctuation">{</span>book<span class="token punctuation">[</span><span class="token string">'book_description'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-group&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;button&quot;</span><span class="token operator">&gt;</span>Submit<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>`
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-create-the-getform-function"><a href="#_3-create-the-getform-function" aria-hidden="true" class="header-anchor">#</a> 3. Create the <code>getForm()</code> function</h4> <p>Create the <code>getForm()</code> function to display the form template. The function will retrieve the book data using the fetch method if a book id is provided or create a empty book object if not.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getForm</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> index <span class="token operator">=</span> location<span class="token punctuation">.</span>hash<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`http://mtm6331-laravel.local/api/books/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>book<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        main<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'container'</span>
        title<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Edit Book'</span>
        templates<span class="token punctuation">.</span><span class="token function">form</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token string">'book_title'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token string">'category_id'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token string">'book_year'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token string">'book_pages'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token string">'book_image'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token string">'book_description'</span><span class="token punctuation">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>

    main<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'container'</span>
    title<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'New Book'</span>
    templates<span class="token punctuation">.</span><span class="token function">form</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_4-udpate-the-event-listener"><a href="#_4-udpate-the-event-listener" aria-hidden="true" class="header-anchor">#</a> 4. Udpate the event listener</h4> <p>Update the event listener to prevent the form from submitting and pass the form data to the <code>setBook()</code> function. Check for the <code>button</code> class do know if a form submission was attempted. Access all the form data by retrieve each input by their id.</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> link <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>link <span class="token operator">&amp;&amp;</span> link<span class="token punctuation">.</span>href<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    history<span class="token punctuation">.</span><span class="token function">pushState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'Seussology'</span><span class="token punctuation">,</span> link<span class="token punctuation">.</span>href<span class="token punctuation">)</span>
    routes<span class="token punctuation">[</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token string">'book_title'</span><span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'book_title'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>
      <span class="token string">'category_id'</span><span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'category_id'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>
      <span class="token string">'book_year'</span><span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'book_year'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>
      <span class="token string">'book_pages'</span><span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'book_pages'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>
      <span class="token string">'book_image'</span><span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'book_image'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>
      <span class="token string">'book_description'</span><span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'book_description'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value
    <span class="token punctuation">}</span>

    <span class="token function">setBook</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_5-create-the-setform-function"><a href="#_5-create-the-setform-function" aria-hidden="true" class="header-anchor">#</a> 5. Create the <code>setForm()</code> function</h4> <p>The <code>setForm()</code> function will handle the sending to the data to the API. It will do this also through fetch method. Since this will be used to both add and update data, the <code>location.hash</code> will be used to be used to identify which task will occur. In both cases, the function to redirect to the book details page and display the book details for the book that was just added or udpated.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">setBook</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> index <span class="token operator">=</span> <span class="token punctuation">(</span>location<span class="token punctuation">.</span>hash<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token template-string"><span class="token string">`/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>location<span class="token punctuation">.</span>hash<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span> <span class="token punctuation">:</span> <span class="token string">''</span>
  <span class="token keyword">const</span> method <span class="token operator">=</span> <span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">'put'</span> <span class="token punctuation">:</span> <span class="token string">'post'</span>

  <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`http://mtm6331-laravel.local/api/books</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    method<span class="token punctuation">:</span> method<span class="token punctuation">,</span>
    headers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json; charset=utf-8'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    body<span class="token punctuation">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>book<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      history<span class="token punctuation">.</span><span class="token function">pushState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'Suessology'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token string">`/books/#</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>book<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
      routes<span class="token punctuation">[</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="removing-data"><a href="#removing-data" aria-hidden="true" class="header-anchor">#</a> Removing Data</h3> <h4 id="_1-do-not-add-a-route"><a href="#_1-do-not-add-a-route" aria-hidden="true" class="header-anchor">#</a> 1. Do NOT add a route</h4> <p>There will be no route for deleting so that books cannot be deleted by just entering the URL.</p> <h4 id="_2-update-the-event-listener"><a href="#_2-update-the-event-listener" aria-hidden="true" class="header-anchor">#</a> 2. Update the Event Listener</h4> <p>Update the event listener to check for the delete button using the <code>data-action</code> attribute and check if the value is equal to <code>delete</code>. Call the <code>removeBook()</code> function.</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> link <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>link <span class="token operator">&amp;&amp;</span> link<span class="token punctuation">.</span>href<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    history<span class="token punctuation">.</span><span class="token function">pushState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'Seussology'</span><span class="token punctuation">,</span> link<span class="token punctuation">.</span>href<span class="token punctuation">)</span>
    routes<span class="token punctuation">[</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token string">'book_title'</span><span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'book_title'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>
      <span class="token string">'category_id'</span><span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'category_id'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>
      <span class="token string">'book_year'</span><span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'book_year'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>
      <span class="token string">'book_pages'</span><span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'book_pages'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>
      <span class="token string">'book_image'</span><span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'book_image'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>
      <span class="token string">'book_description'</span><span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'book_description'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value
    <span class="token punctuation">}</span>

    <span class="token function">setBook</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> link <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">'[data-action]'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>link<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>action <span class="token operator">===</span> <span class="token string">'delete'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">removeBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_3-create-the-removebook-function"><a href="#_3-create-the-removebook-function" aria-hidden="true" class="header-anchor">#</a> 3. Create the <code>removeBook()</code> function</h4> <p>Create the <code>removeBook()</code> function. Use the <code>location.hash</code> to get the desire book and call the API using the fetch method. Redirect and display the <code>books</code> page.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">removeBook</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> index <span class="token operator">=</span> location<span class="token punctuation">.</span>hash<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`http://mtm6331-laravel.local/api/books/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      method<span class="token punctuation">:</span> <span class="token string">'delete'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        history<span class="token punctuation">.</span><span class="token function">pushState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'Suessology'</span><span class="token punctuation">,</span> <span class="token string">'/'</span><span class="token punctuation">)</span>
        routes<span class="token punctuation">[</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/9.509ebe2b.js" defer></script><script src="/assets/js/app.51be034c.js" defer></script>
  </body>
</html>
