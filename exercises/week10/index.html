<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Creating Seussology App - Part 2 | MTM6331</title>
    <meta name="description" content="Server Side Web Development">
    
    
    <link rel="preload" href="/assets/css/0.styles.5ebb4f39.css" as="style"><link rel="preload" href="/assets/js/app.51be034c.js" as="script"><link rel="preload" href="/assets/js/8.531b62ae.js" as="script"><link rel="prefetch" href="/assets/js/40.1b28fcf8.js"><link rel="prefetch" href="/assets/js/2.cda51ec0.js"><link rel="prefetch" href="/assets/js/3.d64c51b0.js"><link rel="prefetch" href="/assets/js/4.59e0ffb1.js"><link rel="prefetch" href="/assets/js/5.ba53a2d6.js"><link rel="prefetch" href="/assets/js/6.4ee3be8a.js"><link rel="prefetch" href="/assets/js/7.a9013374.js"><link rel="prefetch" href="/assets/js/9.509ebe2b.js"><link rel="prefetch" href="/assets/js/10.5fab054e.js"><link rel="prefetch" href="/assets/js/11.e6a23749.js"><link rel="prefetch" href="/assets/js/12.345252a5.js"><link rel="prefetch" href="/assets/js/13.5f9562e2.js"><link rel="prefetch" href="/assets/js/14.51623141.js"><link rel="prefetch" href="/assets/js/15.ab21c475.js"><link rel="prefetch" href="/assets/js/16.0be7b64b.js"><link rel="prefetch" href="/assets/js/17.2517f7ab.js"><link rel="prefetch" href="/assets/js/18.ed363fd6.js"><link rel="prefetch" href="/assets/js/19.1a1818d8.js"><link rel="prefetch" href="/assets/js/20.080c560c.js"><link rel="prefetch" href="/assets/js/21.428e7336.js"><link rel="prefetch" href="/assets/js/22.57f797e7.js"><link rel="prefetch" href="/assets/js/23.b541bd45.js"><link rel="prefetch" href="/assets/js/24.b920db0c.js"><link rel="prefetch" href="/assets/js/25.d6e00bbb.js"><link rel="prefetch" href="/assets/js/26.167a6833.js"><link rel="prefetch" href="/assets/js/27.7038c488.js"><link rel="prefetch" href="/assets/js/28.5c3e2955.js"><link rel="prefetch" href="/assets/js/29.a41ee87b.js"><link rel="prefetch" href="/assets/js/30.dfb172a7.js"><link rel="prefetch" href="/assets/js/31.36f3b78a.js"><link rel="prefetch" href="/assets/js/32.ee4a1e2d.js"><link rel="prefetch" href="/assets/js/33.2552c081.js"><link rel="prefetch" href="/assets/js/34.823d6485.js"><link rel="prefetch" href="/assets/js/35.8a8876c5.js"><link rel="prefetch" href="/assets/js/36.ea700b39.js"><link rel="prefetch" href="/assets/js/37.3aa4851a.js"><link rel="prefetch" href="/assets/js/38.1449eed6.js"><link rel="prefetch" href="/assets/js/39.368ee037.js"><link rel="prefetch" href="/assets/js/41.3a820fed.js"><link rel="prefetch" href="/assets/js/42.542e2119.js"><link rel="prefetch" href="/assets/js/43.c4771cb3.js"><link rel="prefetch" href="/assets/js/44.62fd2343.js"><link rel="prefetch" href="/assets/js/45.bf231005.js"><link rel="prefetch" href="/assets/js/46.9d379b34.js"><link rel="prefetch" href="/assets/js/47.62f9cd10.js"><link rel="prefetch" href="/assets/js/48.2b8e7939.js"><link rel="prefetch" href="/assets/js/49.01336055.js"><link rel="prefetch" href="/assets/js/50.86851bbf.js"><link rel="prefetch" href="/assets/js/51.9ac02cbe.js"><link rel="prefetch" href="/assets/js/52.9fc3bd98.js"><link rel="prefetch" href="/assets/js/53.86b466fc.js"><link rel="prefetch" href="/assets/js/54.d0b3d0aa.js"><link rel="prefetch" href="/assets/js/55.67e1ac64.js"><link rel="prefetch" href="/assets/js/56.431997ce.js"><link rel="prefetch" href="/assets/js/57.bbefb90c.js"><link rel="prefetch" href="/assets/js/58.b411fd87.js"><link rel="prefetch" href="/assets/js/59.9b95031d.js"><link rel="prefetch" href="/assets/js/60.71efe267.js"><link rel="prefetch" href="/assets/js/61.5d3d7526.js"><link rel="prefetch" href="/assets/js/62.b569c253.js"><link rel="prefetch" href="/assets/js/63.30826c74.js"><link rel="prefetch" href="/assets/js/64.8a6dc08a.js"><link rel="prefetch" href="/assets/js/65.aaf1b955.js"><link rel="prefetch" href="/assets/js/66.69d634a6.js"><link rel="prefetch" href="/assets/js/67.055e4a3a.js"><link rel="prefetch" href="/assets/js/68.92c4f2fb.js"><link rel="prefetch" href="/assets/js/69.13b34dda.js"><link rel="prefetch" href="/assets/js/70.1da6fecb.js"><link rel="prefetch" href="/assets/js/71.f2a61f21.js"><link rel="prefetch" href="/assets/js/72.3d518d33.js"><link rel="prefetch" href="/assets/js/73.bc291ce2.js"><link rel="prefetch" href="/assets/js/74.9973e925.js"><link rel="prefetch" href="/assets/js/75.5c3cff77.js"><link rel="prefetch" href="/assets/js/76.4f6dbff3.js"><link rel="prefetch" href="/assets/js/77.cdfe209b.js"><link rel="prefetch" href="/assets/js/78.fe32a3f2.js"><link rel="prefetch" href="/assets/js/79.53bcac61.js"><link rel="prefetch" href="/assets/js/80.cc347b2b.js"><link rel="prefetch" href="/assets/js/81.dc5be549.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5ebb4f39.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">MTM6331</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/modules/" class="nav-link">Modules</a></div><div class="nav-item"><a href="/assignments/" class="nav-link">Assignments</a></div><div class="nav-item"><a href="/resources/" class="nav-link">Resources</a></div><div class="nav-item"><a href="/recordings/" class="nav-link">Recordings</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/modules/" class="nav-link">Modules</a></div><div class="nav-item"><a href="/assignments/" class="nav-link">Assignments</a></div><div class="nav-item"><a href="/resources/" class="nav-link">Resources</a></div><div class="nav-item"><a href="/recordings/" class="nav-link">Recordings</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Creating Seussology App - Part 2</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/exercises/week10/#download-starter-files" class="sidebar-link">Download Starter Files</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/exercises/week10/#working-with-controllers" class="sidebar-link">Working with Controllers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/exercises/week10/#creating-controller" class="sidebar-link">Creating controller</a></li><li class="sidebar-sub-header"><a href="/exercises/week10/#adding-a-method-to-a-controller" class="sidebar-link">Adding a method to a controller</a></li><li class="sidebar-sub-header"><a href="/exercises/week10/#updating-books-route" class="sidebar-link">Updating Books Route</a></li></ul></li><li><a href="/exercises/week10/#working-with-models" class="sidebar-link">Working with Models</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/exercises/week10/#adding-seussology-database" class="sidebar-link">Adding Seussology database</a></li><li class="sidebar-sub-header"><a href="/exercises/week10/#defining-the-book-model" class="sidebar-link">Defining the Book Model</a></li><li class="sidebar-sub-header"><a href="/exercises/week10/#requesting-the-books-data" class="sidebar-link">Requesting the Books Data</a></li><li class="sidebar-sub-header"><a href="/exercises/week10/#replacing-static-content" class="sidebar-link">Replacing Static Content</a></li></ul></li><li><a href="/exercises/week10/#working-with-route-parameters" class="sidebar-link">Working with Route Parameters</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/exercises/week10/#updating-the-route" class="sidebar-link">Updating the Route</a></li><li class="sidebar-sub-header"><a href="/exercises/week10/#creating-the-show-method" class="sidebar-link">Creating the Show Method</a></li><li class="sidebar-sub-header"><a href="/exercises/week10/#updating-the-book-view" class="sidebar-link">Updating the Book View</a></li></ul></li><li><a href="/exercises/week10/#working-with-relationships" class="sidebar-link">Working with Relationships</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/exercises/week10/#defining-the-model" class="sidebar-link">Defining the Model</a></li><li class="sidebar-sub-header"><a href="/exercises/week10/#defining-the-relationship" class="sidebar-link">Defining the Relationship</a></li><li class="sidebar-sub-header"><a href="/exercises/week10/#querying-with-the-relationship" class="sidebar-link">Querying with the Relationship</a></li><li class="sidebar-sub-header"><a href="/exercises/week10/#adding-quotes-to-view" class="sidebar-link">Adding Quotes to View</a></li></ul></li><li><a href="/exercises/week10/#working-with-new-data" class="sidebar-link">Working with New Data</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/exercises/week10/#using-the-books-controller" class="sidebar-link">Using the Books Controller</a></li><li class="sidebar-sub-header"><a href="/exercises/week10/#creating-categories-dynamically" class="sidebar-link">Creating categories dynamically</a></li><li class="sidebar-sub-header"><a href="/exercises/week10/#creating-a-submission-route" class="sidebar-link">Creating a Submission Route</a></li><li class="sidebar-sub-header"><a href="/exercises/week10/#creating-the-store-method" class="sidebar-link">Creating the store Method</a></li><li class="sidebar-sub-header"><a href="/exercises/week10/#allowing-for-new-data" class="sidebar-link">Allowing for New Data</a></li></ul></li><li><a href="/exercises/week10/#updating-existing-data" class="sidebar-link">Updating Existing Data</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/exercises/week10/#creating-an-edit-route" class="sidebar-link">Creating an Edit Route</a></li><li class="sidebar-sub-header"><a href="/exercises/week10/#creating-an-edit-method" class="sidebar-link">Creating an Edit Method</a></li><li class="sidebar-sub-header"><a href="/exercises/week10/#updating-the-form-view" class="sidebar-link">Updating the Form View</a></li><li class="sidebar-sub-header"><a href="/exercises/week10/#retrieving-the-book-s-category" class="sidebar-link">Retrieving the Book's Category</a></li><li class="sidebar-sub-header"><a href="/exercises/week10/#updating-the-book" class="sidebar-link">Updating the Book</a></li></ul></li><li><a href="/exercises/week10/#deleting-existing-data" class="sidebar-link">Deleting Existing Data</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/exercises/week10/#deleting-a-book" class="sidebar-link">Deleting a Book</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="creating-seussology-app-part-2"><a href="#creating-seussology-app-part-2" aria-hidden="true" class="header-anchor">#</a> Creating Seussology App - Part 2</h1> <h2 id="download-starter-files"><a href="#download-starter-files" aria-hidden="true" class="header-anchor">#</a> Download Starter Files</h2> <p>So all students are starting from the same point. Download the <a href="/documents/seussology-part2.zip">Seussology Files</a>.</p> <p>Unzip the file and copy the <code>public</code>, <code>resources</code>, and <code>routes</code> folders replace the existing folders in your laravel project.</p> <h2 id="working-with-controllers"><a href="#working-with-controllers" aria-hidden="true" class="header-anchor">#</a> Working with Controllers</h2> <h3 id="creating-controller"><a href="#creating-controller" aria-hidden="true" class="header-anchor">#</a> Creating controller</h3> <h4 id="_1-open-command-line-application"><a href="#_1-open-command-line-application" aria-hidden="true" class="header-anchor">#</a> 1. Open Command Line application</h4> <p>Open Local by Flywheel and start the MTM6331 Laravel site. Right click on the MTM6331 Laravel site in the Local Sites menu and select &quot;Open Site SSH&quot;.</p> <p><img src="/images/exercises/open-site-ssh.png" alt="Open Site SSH"></p> <p>Now, your default command line application should be open to the Local by Flywheel virtual machine. All command must be entered in this command line window.</p> <h4 id="_2-use-artisan"><a href="#_2-use-artisan" aria-hidden="true" class="header-anchor">#</a> 2. Use Artisan</h4> <p>Type and execute the following command in Local by Flywheel virtual machine command line window.</p> <div class="language- extra-class"><pre class="language-text"><code>cd app
php artisan make:controller BooksController
</code></pre></div><p>After executing this command, you should find that the file <code>BooksController.php</code> was created in the <code>app/Http/Controllers</code> directory.</p> <div class="danger custom-block"><p class="custom-block-title">Important</p> <p>Leave the Command Line Window open. We will use it again.</p></div> <h3 id="adding-a-method-to-a-controller"><a href="#adding-a-method-to-a-controller" aria-hidden="true" class="header-anchor">#</a> Adding a method to a controller</h3> <h4 id="_1-open-bookscontroller-php-in-app-http-controllers"><a href="#_1-open-bookscontroller-php-in-app-http-controllers" aria-hidden="true" class="header-anchor">#</a> 1. Open <code>BooksController.php</code> in <code>app/Http/Controllers</code></h4> <h4 id="_2-add-index-method"><a href="#_2-add-index-method" aria-hidden="true" class="header-anchor">#</a> 2. Add index method</h4> <p>Add new method (function) to the <code>BooksController</code> class. The method will have the name <code>index</code> and return the <code>books</code> view.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">BooksController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> index <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'books'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><h3 id="updating-books-route"><a href="#updating-books-route" aria-hidden="true" class="header-anchor">#</a> Updating Books Route</h3> <h4 id="_1-open-web-php-in-the-routes-directory"><a href="#_1-open-web-php-in-the-routes-directory" aria-hidden="true" class="header-anchor">#</a> 1. Open <code>web.php</code> in the <code>routes/</code> directory</h4> <h4 id="_2-update-the-route"><a href="#_2-update-the-route" aria-hidden="true" class="header-anchor">#</a> 2. Update the route</h4> <p>Replace the books route with the following:</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'BooksController@index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="working-with-models"><a href="#working-with-models" aria-hidden="true" class="header-anchor">#</a> Working with Models</h2> <h3 id="adding-seussology-database"><a href="#adding-seussology-database" aria-hidden="true" class="header-anchor">#</a> Adding Seussology database</h3> <h4 id="_1-download-the-seussology-laravel-sql-file"><a href="#_1-download-the-seussology-laravel-sql-file" aria-hidden="true" class="header-anchor">#</a> 1. Download the <a href="/documents/seussology-laravel.sql">seussology-laravel.sql</a> file</h4> <h4 id="_2-use-adminer-to-import-the-database-to-mtm6331-laravel-site"><a href="#_2-use-adminer-to-import-the-database-to-mtm6331-laravel-site" aria-hidden="true" class="header-anchor">#</a> 2. Use Adminer to import the database to MTM6331 Laravel site</h4> <h4 id="_3-open-env-file-at-the-laravel-site-root"><a href="#_3-open-env-file-at-the-laravel-site-root" aria-hidden="true" class="header-anchor">#</a> 3. Open <code>.env</code> file at the Laravel site root</h4> <h4 id="_4-update-the-database-settings"><a href="#_4-update-the-database-settings" aria-hidden="true" class="header-anchor">#</a> 4. Update the Database Settings</h4> <p>Starting around line 9, we can find the database settings, which will look like this:</p> <div class="language-env extra-class"><pre class="language-text"><code>DB_CONNECTION=mysql
DB_HOST=192.168.95.100
DB_PORT=4035
DB_DATABASE=local
DB_USERNAME=root
DB_PASSWORD=root
</code></pre></div><p>From this list, <code>DB_PORT</code> and <code>DB_DATABASE</code> will need to be updated. <code>DB_DATABASE</code> should equal <code>seussology</code> and <code>DB_PORT</code> should equal the MySQL remote port number for your version of the MTM6331 Laravel site. That number can be found by going to Local by Flywheel, selecting the MTM6331 Laravel site, and clicking on the database tab.</p> <h3 id="defining-the-book-model"><a href="#defining-the-book-model" aria-hidden="true" class="header-anchor">#</a> Defining the Book Model</h3> <h4 id="_1-go-to-local-by-flywheel-virtual-machine-command-line-window"><a href="#_1-go-to-local-by-flywheel-virtual-machine-command-line-window" aria-hidden="true" class="header-anchor">#</a> 1. Go to Local by Flywheel virtual machine command line window</h4> <h4 id="_2-enter-the-following-command"><a href="#_2-enter-the-following-command" aria-hidden="true" class="header-anchor">#</a> 2. Enter the following command</h4> <div class="language- extra-class"><pre class="language-text"><code>php artisan make:model Book
</code></pre></div><p>After executing the command, we should find the file <code>Book.php</code> inside the <code>app</code> directory of our Laravel application.</p> <h3 id="requesting-the-books-data"><a href="#requesting-the-books-data" aria-hidden="true" class="header-anchor">#</a> Requesting the Books Data</h3> <h4 id="_1-open-app-http-controllers-bookscontroller-php"><a href="#_1-open-app-http-controllers-bookscontroller-php" aria-hidden="true" class="header-anchor">#</a> 1. Open <code>app/Http/Controllers/BooksController.php</code></h4> <h4 id="_2-import-the-book-model"><a href="#_2-import-the-book-model" aria-hidden="true" class="header-anchor">#</a> 2. Import the Book Model</h4> <p>Add <code>use App\Book</code> after the namespace declaration.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br></div><pre class="language-php"><code><span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Book</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_3-request-all-the-books-from-the-database"><a href="#_3-request-all-the-books-from-the-database" aria-hidden="true" class="header-anchor">#</a> 3. Request all the books from the database</h4> <p>To retrieve all the books, we will use the <code>all()</code> method from the Book Model. We will set the results of the query to the variable <code>$books</code>.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$books</span> <span class="token operator">=</span> <span class="token constant">BOOK</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The above line should be placed right before the <code>return</code> statement of the <code>index()</code> method</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> index <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$books</span> <span class="token operator">=</span> <span class="token constant">BOOK</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Books'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_4-send-the-books-data-to-the-view"><a href="#_4-send-the-books-data-to-the-view" aria-hidden="true" class="header-anchor">#</a> 4. Send the books data to the view</h4> <p>Finally, we will send the data retrieved from the database to view. We do this by placing the <code>$books</code> variable inside an associative array, which itself is the second argument the <code>view()</code> method.</p> <p><em>BookController.php</em></p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Book</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">BooksController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> index <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$books</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Books'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'books'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$books</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><h3 id="replacing-static-content"><a href="#replacing-static-content" aria-hidden="true" class="header-anchor">#</a> Replacing Static Content</h3> <h4 id="_1-open-books-blade-php-in-the-resources-views"><a href="#_1-open-books-blade-php-in-the-resources-views" aria-hidden="true" class="header-anchor">#</a> 1. Open <code>books.blade.php</code> in the <code>resources/views</code>.</h4> <h4 id="_2-create-a-loop"><a href="#_2-create-a-loop" aria-hidden="true" class="header-anchor">#</a> 2. Create a loop</h4> <p>We will create a loop using the <code>@foreach</code> directive around the book div:</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-php"><code>@<span class="token function">section</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'main'</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span>main id<span class="token operator">=</span><span class="token double-quoted-string string">&quot;main&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;books&quot;</span><span class="token operator">&gt;</span>
        @<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$books</span> <span class="token keyword">as</span> <span class="token variable">$book</span><span class="token punctuation">)</span>
            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;book&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>a <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;book-image&quot;</span> href<span class="token operator">=</span><span class="token double-quoted-string string">&quot;/book&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token double-quoted-string string">&quot;http://www.seussville.com/media/assets/all-book-covers/1.jpg&quot;</span> alt<span class="token operator">=</span><span class="token double-quoted-string string">&quot;And to Think That I Saw It on Mulberry Street&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        @<span class="token keyword">endforeach</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>main<span class="token operator">&gt;</span>
@endsection
</code></pre></div><h4 id="_4-replace-static-content-with-book-data"><a href="#_4-replace-static-content-with-book-data" aria-hidden="true" class="header-anchor">#</a> 4. Replace static content with $book data</h4> <p>Use the mustache syntax to insert the $book data in the appropriate spots.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br></div><pre class="language-php"><code>@<span class="token function">section</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'main'</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span>main id<span class="token operator">=</span><span class="token double-quoted-string string">&quot;main&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;books&quot;</span><span class="token operator">&gt;</span>
        @<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$books</span> <span class="token keyword">as</span> <span class="token variable">$book</span><span class="token punctuation">)</span>
            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;book&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>a <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;book-image&quot;</span> href<span class="token operator">=</span><span class="token double-quoted-string string">&quot;/book/{{ <span class="token interpolation"><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">]</span></span> }}&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token double-quoted-string string">&quot;{{ <span class="token interpolation"><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_image'</span><span class="token punctuation">]</span></span> }}&quot;</span> alt<span class="token operator">=</span><span class="token double-quoted-string string">&quot;{{ <span class="token interpolation"><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_title'</span><span class="token punctuation">]</span></span> }}&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        @<span class="token keyword">endforeach</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>main<span class="token operator">&gt;</span>
@endsection
</code></pre></div><h2 id="working-with-route-parameters"><a href="#working-with-route-parameters" aria-hidden="true" class="header-anchor">#</a> Working with Route Parameters</h2> <h3 id="updating-the-route"><a href="#updating-the-route" aria-hidden="true" class="header-anchor">#</a> Updating the Route</h3> <h4 id="_1-open-web-php-in-the-routes-directory-2"><a href="#_1-open-web-php-in-the-routes-directory-2" aria-hidden="true" class="header-anchor">#</a> 1. Open <code>web.php</code> in the <code>routes</code> directory</h4> <h4 id="_2-add-the-book-route-with-parameter"><a href="#_2-add-the-book-route-with-parameter" aria-hidden="true" class="header-anchor">#</a> 2. Add the book route with parameter</h4> <p>Add a new route for <code>/book</code> with a parameter of <code>id</code>. Parameters are surrounded by curly braces.  The route will point to the <code>show()</code> method of the <code>BookController</code> class.</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/book/{id}'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'BooksController@show'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="creating-the-show-method"><a href="#creating-the-show-method" aria-hidden="true" class="header-anchor">#</a> Creating the Show Method</h3> <h4 id="_1-open-bookscontroller-php-in-the-app-http-controllers-directory"><a href="#_1-open-bookscontroller-php-in-the-app-http-controllers-directory" aria-hidden="true" class="header-anchor">#</a> 1. Open <code>BooksController.php</code> in the <code>app/Http/Controllers</code> directory</h4> <h4 id="_2-add-the-new-method"><a href="#_2-add-the-new-method" aria-hidden="true" class="header-anchor">#</a> 2. Add the new method</h4> <p>Create a new method in the <code>BookController</code> class with the name of <code>show</code> and it should take the parameter <code>$id</code>.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name">BooksController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> index <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$books</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'books'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'books'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$books</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</span></code></pre></div><h4 id="_3-request-the-desired-book-from-the-database"><a href="#_3-request-the-desired-book-from-the-database" aria-hidden="true" class="header-anchor">#</a> 3. Request the desired book from the database</h4> <p>Use the <code>find()</code> method from the Book Model, passing the <code>$id</code> as the parameter, to get the desired book. Set results of to the variable <code>$book</code>.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br></div><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_4-return-the-book-view-with-the-book-data"><a href="#_4-return-the-book-view-with-the-book-data" aria-hidden="true" class="header-anchor">#</a> 4. Return the book view with the book data</h4> <p>Return the <code>book</code> view, passing the <code>$book</code> variable inside of an associative array.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'book'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'book'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$book</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="updating-the-book-view"><a href="#updating-the-book-view" aria-hidden="true" class="header-anchor">#</a> Updating the Book View</h3> <h4 id="_1-open-book-blade-php-in-the-resources-view-directory"><a href="#_1-open-book-blade-php-in-the-resources-view-directory" aria-hidden="true" class="header-anchor">#</a> 1. Open <code>book.blade.php</code> in the <code>resources/view</code> directory</h4> <h4 id="_2-replace-the-static-content"><a href="#_2-replace-the-static-content" aria-hidden="true" class="header-anchor">#</a> 2. Replace the static content</h4> <p>Replace all the static content with the data receive from the database.</p> <div class="warning custom-block"><p class="custom-block-title">Note</p> <p>Book quotes come from the <code>quotes</code> table, which we have not access yet.</p></div> <div class="language-php extra-class"><pre class="language-php"><code>@<span class="token function">section</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'main'</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span>main id<span class="token operator">=</span><span class="token double-quoted-string string">&quot;main&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;details&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;details-controls&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token double-quoted-string string">&quot;/edit/{{ <span class="token interpolation"><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">]</span></span> }}&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;details-control&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;far fa-edit&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token double-quoted-string string">&quot;/delete/{{ <span class="token interpolation"><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">]</span></span> }}&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;details-control&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;far fa-trash-alt&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;details-image&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token double-quoted-string string">&quot;{{ <span class="token interpolation"><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_image'</span><span class="token punctuation">]</span></span> }}&quot;</span> alt<span class="token operator">=</span><span class="token double-quoted-string string">&quot;{{ <span class="token interpolation"><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_title'</span><span class="token punctuation">]</span></span> }}&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h2 <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;details-title&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_title'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_description'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Published<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_year'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span>br<span class="token operator">&gt;</span>
        Number of Pages<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_pages'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>blockquote <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;details-quote&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Stop telling such outlandish tales<span class="token punctuation">.</span> Stop turning minnows into whales<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>blockquote<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>blockquote <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;details-quote&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token keyword">For</span> I had a story that no one could beat<span class="token operator">!</span> <span class="token keyword">And</span> to think that I saw it on Mulberry Street<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>blockquote<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>main<span class="token operator">&gt;</span>
@endsection
</code></pre></div><h2 id="working-with-relationships"><a href="#working-with-relationships" aria-hidden="true" class="header-anchor">#</a> Working with Relationships</h2> <h3 id="defining-the-model"><a href="#defining-the-model" aria-hidden="true" class="header-anchor">#</a> Defining the Model</h3> <h4 id="_1-go-to-local-by-flywheel-virtual-machine-command-line-window-2"><a href="#_1-go-to-local-by-flywheel-virtual-machine-command-line-window-2" aria-hidden="true" class="header-anchor">#</a> 1. Go to Local by Flywheel virtual machine command line window</h4> <h4 id="_2-enter-the-following-command-2"><a href="#_2-enter-the-following-command-2" aria-hidden="true" class="header-anchor">#</a> 2. Enter the following command</h4> <div class="language- extra-class"><pre class="language-text"><code>php artisan make:model Quote
</code></pre></div><p>After executing the command, we should find the file <code>Quote.php</code> inside the <code>app</code> directory of our Laravel application.</p> <h3 id="defining-the-relationship"><a href="#defining-the-relationship" aria-hidden="true" class="header-anchor">#</a> Defining the Relationship</h3> <h4 id="_1-open-book-php-in-the-app-directory"><a href="#_1-open-book-php-in-the-app-directory" aria-hidden="true" class="header-anchor">#</a> 1. Open <code>Book.php</code> in the <code>/app</code> directory</h4> <h4 id="_2-create-a-new-method"><a href="#_2-create-a-new-method" aria-hidden="true" class="header-anchor">#</a> 2. Create a new method</h4> <p>Inside the Book class, create a new method with the name <code>quotes</code>.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> quotes <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><h4 id="_3-define-the-relationship"><a href="#_3-define-the-relationship" aria-hidden="true" class="header-anchor">#</a> 3. Define the relationship</h4> <p>Inside the <code>quotes()</code> method, return <code>hasMany()</code> method passing the path to the <code>Quote</code> model (<code>'App\Quote'</code>) as the parameter.</p> <div class="warning custom-block"><p class="custom-block-title">Note</p> <p>Because the <code>hasMany()</code> method is also part of the Book class, we will use the <code>$this</code> variable to call the <code>hasMany()</code> method.</p></div> <div class="language-php extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br></div><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> quotes <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasMany</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'App\Quote'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="querying-with-the-relationship"><a href="#querying-with-the-relationship" aria-hidden="true" class="header-anchor">#</a> Querying with the Relationship</h3> <h4 id="_1-open-bookscontroller-php-in-the-app-http-controllers-directory-2"><a href="#_1-open-bookscontroller-php-in-the-app-http-controllers-directory-2" aria-hidden="true" class="header-anchor">#</a> 1. Open <code>BooksController.php</code> in the <code>app/Http/Controllers</code> directory</h4> <h4 id="_2-request-the-quotes"><a href="#_2-request-the-quotes" aria-hidden="true" class="header-anchor">#</a> 2. Request the quotes</h4> <p>Inside the <code>show()</code> method, request all of the <code>quotes</code> for the selected book by accessing the <code>quotes</code> method <code>Book</code> model. Save the results to the <code>$quotes</code> variable.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> show <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$quotes</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">quotes</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'book'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'book'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$book</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-send-the-quotes-to-the-view"><a href="#_3-send-the-quotes-to-the-view" aria-hidden="true" class="header-anchor">#</a> 3. Send the quotes to the view</h4> <p>Add <code>$quotes</code> to the view by adding a new item the array.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> show <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$quotes</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">quotes</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'book'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'book'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$book</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'quotes'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$quotes</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="adding-quotes-to-view"><a href="#adding-quotes-to-view" aria-hidden="true" class="header-anchor">#</a> Adding Quotes to View</h3> <h4 id="_1-open-book-blade-php-in-the-resources-views-directory"><a href="#_1-open-book-blade-php-in-the-resources-views-directory" aria-hidden="true" class="header-anchor">#</a> 1. Open <code>book.blade.php</code> in the <code>resources/views</code> directory</h4> <h4 id="_2-replace-the-static-quotes"><a href="#_2-replace-the-static-quotes" aria-hidden="true" class="header-anchor">#</a> 2. Replace the static quotes</h4> <p>Using the <code>@foreach</code> directive, replace the static quotes with the quotes data, stored in the <code>$quotes</code> variable.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br></div><pre class="language-php"><code>@<span class="token function">section</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'main'</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span>main id<span class="token operator">=</span><span class="token double-quoted-string string">&quot;main&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;details&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;details-controls&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token double-quoted-string string">&quot;/edit/{{ <span class="token interpolation"><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">]</span></span> }}&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;details-control&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;far fa-edit&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token double-quoted-string string">&quot;/delete/{{ <span class="token interpolation"><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">]</span></span> }}&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;details-control&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;far fa-trash-alt&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;details-image&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token double-quoted-string string">&quot;{{ <span class="token interpolation"><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_image'</span><span class="token punctuation">]</span></span> }}&quot;</span> alt<span class="token operator">=</span><span class="token double-quoted-string string">&quot;{{ <span class="token interpolation"><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_title'</span><span class="token punctuation">]</span></span> }}&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h2 <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;details-title&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_title'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_description'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Published<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_year'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span>br<span class="token operator">&gt;</span>
        Number of Pages<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_pages'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        @<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$quotes</span> <span class="token keyword">as</span> <span class="token variable">$quote</span><span class="token punctuation">)</span>
        <span class="token operator">&lt;</span>blockquote <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;details-quote&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$quote</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'quote'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>blockquote<span class="token operator">&gt;</span>
        @<span class="token keyword">endforeach</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>main<span class="token operator">&gt;</span>
@endsection
</code></pre></div><h2 id="working-with-new-data"><a href="#working-with-new-data" aria-hidden="true" class="header-anchor">#</a> Working with New Data</h2> <div class="danger custom-block"><p class="custom-block-title">Note</p> <p>To keep things simple, the following example will NOT include any validation. However, in a real world form, you should ALWAYS include validation.</p></div> <h3 id="using-the-books-controller"><a href="#using-the-books-controller" aria-hidden="true" class="header-anchor">#</a> Using the Books Controller</h3> <p>Use the <code>BooksController</code> instead of the routes to handle the logic for New Book page.</p> <h4 id="_1-open-web-php-in-the-routes-directory-3"><a href="#_1-open-web-php-in-the-routes-directory-3" aria-hidden="true" class="header-anchor">#</a> 1. Open <code>web.php</code> in the <code>routes/</code> directory</h4> <h4 id="_2-update-the-route-for-a-new-book"><a href="#_2-update-the-route-for-a-new-book" aria-hidden="true" class="header-anchor">#</a> 2. Update the route for a new book</h4> <p>Replace the inline function with a call to the <code>new()</code> method in <code>BooksController</code></p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/new'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'BooksController@new'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_3-open-bookscontroller-php-in-the-app-http-controllers-directory"><a href="#_3-open-bookscontroller-php-in-the-app-http-controllers-directory" aria-hidden="true" class="header-anchor">#</a> 3. Open <code>BooksController.php</code> in the <code>app/Http/Controllers</code> directory</h4> <h4 id="_4-add-the-new-method"><a href="#_4-add-the-new-method" aria-hidden="true" class="header-anchor">#</a> 4. Add the new method</h4> <p>Add a new method with the name <code>new</code></p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Book</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">BooksController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> index <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$books</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'books'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'books'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$books</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> show <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$quotes</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">quotes</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'book'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'book'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$book</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'quotes'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$quotes</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</span></code></pre></div><h4 id="_5-return-the-form-view"><a href="#_5-return-the-form-view" aria-hidden="true" class="header-anchor">#</a> 5. Return the form view</h4> <p>Return the form view inside the <code>new()</code> method, pass an array containing key <code>title</code> and the value <code>New Book</code>.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'form'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Add Book'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="creating-categories-dynamically"><a href="#creating-categories-dynamically" aria-hidden="true" class="header-anchor">#</a> Creating categories dynamically</h3> <p>Replace the categories dropdown when a dynamic one by retrieving the categories from the database.</p> <h4 id="_1-go-to-local-by-flywheel-virtual-machine-command-line-window-3"><a href="#_1-go-to-local-by-flywheel-virtual-machine-command-line-window-3" aria-hidden="true" class="header-anchor">#</a> 1. Go to Local by Flywheel virtual machine command line window</h4> <h4 id="_2-enter-the-following-command-3"><a href="#_2-enter-the-following-command-3" aria-hidden="true" class="header-anchor">#</a> 2. Enter the following command</h4> <div class="language- extra-class"><pre class="language-text"><code>php artisan make:model Category
</code></pre></div><h4 id="_3-open-bookscontroller-php-in-the-app-http-controllers-directory-2"><a href="#_3-open-bookscontroller-php-in-the-app-http-controllers-directory-2" aria-hidden="true" class="header-anchor">#</a> 3. Open <code>BooksController.php</code> in the <code>app/Http/Controllers</code> directory</h4> <h4 id="_4-import-the-category-model"><a href="#_4-import-the-category-model" aria-hidden="true" class="header-anchor">#</a> 4. Import the Category model</h4> <p>Add the following line belong the import the Category model</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Book</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Category</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">BooksController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> index <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$books</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'books'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'books'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$books</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> show <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$quotes</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">quotes</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'book'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'book'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$book</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'quotes'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$quotes</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'form'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Add Book'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

 <span class="token punctuation">}</span>

</span></code></pre></div><h4 id="_5-retrieve-categories-from-database"><a href="#_5-retrieve-categories-from-database" aria-hidden="true" class="header-anchor">#</a> 5. Retrieve categories from database</h4> <p>Inside the <code>new()</code> method, use the <code>Category</code> model and the <code>all()</code> method to retrieve all the categories.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$categories</span> <span class="token operator">=</span> Category<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'form'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Add Book'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_6-send-categories-to-view"><a href="#_6-send-categories-to-view" aria-hidden="true" class="header-anchor">#</a> 6. Send categories to view</h4> <p>Add another item to data array being sent to the view that will hold that categories.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$categories</span> <span class="token operator">=</span> Category<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'form'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Add Book'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'categories'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$categories</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_7-open-form-blade-php-in-the-resources-views-directory"><a href="#_7-open-form-blade-php-in-the-resources-views-directory" aria-hidden="true" class="header-anchor">#</a> 7. Open <code>form.blade.php</code> in the <code>resources/views</code> directory</h4> <h4 id="_8-update-the-select-menu"><a href="#_8-update-the-select-menu" aria-hidden="true" class="header-anchor">#</a> 8. Update the select menu</h4> <p>Use <code>$categories</code> data select menu.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span>select <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;form-input&quot;</span> name<span class="token operator">=</span><span class="token double-quoted-string string">&quot;category_id&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>option<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
    @<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$categories</span> <span class="token keyword">as</span> <span class="token variable">$category</span><span class="token punctuation">)</span>
        <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token double-quoted-string string">&quot;{{ <span class="token interpolation"><span class="token variable">$category</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">]</span></span> }}&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$category</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'category_name'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
    @<span class="token keyword">endforeach</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
</code></pre></div><h3 id="creating-a-submission-route"><a href="#creating-a-submission-route" aria-hidden="true" class="header-anchor">#</a> Creating a Submission Route</h3> <h4 id="_1-open-web-php-in-the-routes-directory-4"><a href="#_1-open-web-php-in-the-routes-directory-4" aria-hidden="true" class="header-anchor">#</a> 1. Open <code>web.php</code> in the <code>routes/</code> directory</h4> <h4 id="_2-create-a-route-for-a-new-book-submission"><a href="#_2-create-a-route-for-a-new-book-submission" aria-hidden="true" class="header-anchor">#</a> 2. Create a route for a new book submission</h4> <p>Create a route using the <code>post()</code> method and <code>/new</code> URL. It will point to the <code>store()</code> method in the <code>BooksController</code>.</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/new'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'BooksController@store'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="creating-the-store-method"><a href="#creating-the-store-method" aria-hidden="true" class="header-anchor">#</a> Creating the store Method</h3> <h4 id="_1-open-bookscontroller-php-in-the-app-http-controllers-directory-3"><a href="#_1-open-bookscontroller-php-in-the-app-http-controllers-directory-3" aria-hidden="true" class="header-anchor">#</a> 1. Open <code>BooksController.php</code> in the <code>app/Http/Controllers</code> directory</h4> <h4 id="_2-add-the-store-method"><a href="#_2-add-the-store-method" aria-hidden="true" class="header-anchor">#</a> 2. Add the store method</h4> <p>Add a new method with the name <code>store</code> and the parameter <code>Request $request</code>.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Book</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Category</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">BooksController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> index <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$books</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'books'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'books'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$books</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> show <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$quotes</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">quotes</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'book'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'book'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$book</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'quotes'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$quotes</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$categories</span> <span class="token operator">=</span> Category<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'form'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Add Book'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'categories'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$categories</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> store <span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</span></code></pre></div><h4 id="_3-insert-the-data-into-the-database"><a href="#_3-insert-the-data-into-the-database" aria-hidden="true" class="header-anchor">#</a> 3. Insert the data into the database</h4> <p>Use the <code>Book::create()</code> method to insert the <code>$request</code> data into the database.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br></div><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> store <span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_4-redirect-to-the-edit-page"><a href="#_4-redirect-to-the-edit-page" aria-hidden="true" class="header-anchor">#</a> 4. Redirect to the edit page</h4> <p>Return the <code>redirect()</code> padding the <code>&quot;/edit/{$book['id']}&quot;</code> as a parameter.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> store <span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;/edit/<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="danger custom-block"><p class="custom-block-title">Note</p> <p>Submitting the form will fail because of security features build into Laravel.</p></div> <h3 id="allowing-for-new-data"><a href="#allowing-for-new-data" aria-hidden="true" class="header-anchor">#</a> Allowing for New Data</h3> <h4 id="_1-open-book-php-in-the-app-directory-2"><a href="#_1-open-book-php-in-the-app-directory-2" aria-hidden="true" class="header-anchor">#</a> 1. Open <code>Book.php</code> in the <code>app/</code> directory</h4> <h4 id="_2-add-fillable-inputs"><a href="#_2-add-fillable-inputs" aria-hidden="true" class="header-anchor">#</a> 2. Add fillable inputs</h4> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br></div><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token variable">$fillable</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'book_title'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'book_year'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'book_pages'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'book_image'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'book_description'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'category_id'</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token variable">$timestamps</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">quotes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasMany</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'App\Quote'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">Note</p> <p>Submitting the form will result in page not found because we have not defined the edit route yet.</p></div> <h2 id="updating-existing-data"><a href="#updating-existing-data" aria-hidden="true" class="header-anchor">#</a> Updating Existing Data</h2> <h3 id="creating-an-edit-route"><a href="#creating-an-edit-route" aria-hidden="true" class="header-anchor">#</a> Creating an Edit Route</h3> <h4 id="_1-open-web-php-in-the-routes-directory-5"><a href="#_1-open-web-php-in-the-routes-directory-5" aria-hidden="true" class="header-anchor">#</a> 1. Open <code>web.php</code> in the <code>routes/</code> directory</h4> <h4 id="_2-update-the-route-2"><a href="#_2-update-the-route-2" aria-hidden="true" class="header-anchor">#</a> 2. Update the route</h4> <p>Create the edit route with <code>id</code> parameter to the URI and point the route the <code>edit()</code> method of the <code>BooksController</code>.</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/edit/{id}'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'BooksController@edit'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="creating-an-edit-method"><a href="#creating-an-edit-method" aria-hidden="true" class="header-anchor">#</a> Creating an Edit Method</h3> <h4 id="_1-open-bookscontroller-php-in-the-app-http-controllers-directory-4"><a href="#_1-open-bookscontroller-php-in-the-app-http-controllers-directory-4" aria-hidden="true" class="header-anchor">#</a> 1. Open <code>BooksController.php</code> in the <code>app/Http/Controllers</code> directory</h4> <h4 id="_2-add-the-edit-method"><a href="#_2-add-the-edit-method" aria-hidden="true" class="header-anchor">#</a> 2. Add the <code>edit</code> method</h4> <p>Add an <code>edit()</code> method with parameter of <code>$id</code>.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Book</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Category</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">BooksController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> index <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$books</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'books'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'books'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$books</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> show <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$quotes</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">quotes</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'book'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'book'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$book</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'quotes'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$quotes</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$categories</span> <span class="token operator">=</span> Category<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'form'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Add Book'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'categories'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$categories</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> store <span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;/edit/<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> edit <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</span></code></pre></div><h4 id="_3-retrieve-the-book-data"><a href="#_3-retrieve-the-book-data" aria-hidden="true" class="header-anchor">#</a> 3. Retrieve the book data</h4> <p>Use the <code>Book::find()</code> to get book data by <code>$id</code>.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br></div><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> edit <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_4-return-the-form-view"><a href="#_4-return-the-form-view" aria-hidden="true" class="header-anchor">#</a> 4. Return the form view</h4> <p>Return the form view passing the book data.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> edit <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'form'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'book'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$book</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="updating-the-form-view"><a href="#updating-the-form-view" aria-hidden="true" class="header-anchor">#</a> Updating the Form View</h3> <h4 id="_1-open-form-blade-php-in-the-resources-views-directory"><a href="#_1-open-form-blade-php-in-the-resources-views-directory" aria-hidden="true" class="header-anchor">#</a> 1. Open <code>form.blade.php</code> in the <code>resources/views</code> directory</h4> <h4 id="_2-update-the-form-to-accept-data"><a href="#_2-update-the-form-to-accept-data" aria-hidden="true" class="header-anchor">#</a> 2. Update the form to accept data</h4> <p>Use the <code>@isset</code> and <code>@endisset</code> directive to check if the book data is available, and if so, add the appropriate book data to each input value.</p> <div class="danger custom-block"><p class="custom-block-title">Note</p> <p>Replace each input with the appropriate one below.</p></div> <div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;form-input&quot;</span> type<span class="token operator">=</span><span class="token double-quoted-string string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token double-quoted-string string">&quot;book_title&quot;</span> 
value<span class="token operator">=</span><span class="token double-quoted-string string">&quot;@isset(<span class="token interpolation"><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_title'</span><span class="token punctuation">]</span></span>){{ <span class="token interpolation"><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_title'</span><span class="token punctuation">]</span></span> }}@endisset&quot;</span><span class="token operator">&gt;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;form-input&quot;</span> type<span class="token operator">=</span><span class="token double-quoted-string string">&quot;text&quot;</span> maxlength<span class="token operator">=</span><span class="token double-quoted-string string">&quot;4&quot;</span> name<span class="token operator">=</span><span class="token double-quoted-string string">&quot;book_year&quot;</span> 
value<span class="token operator">=</span><span class="token double-quoted-string string">&quot;@isset(<span class="token interpolation"><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_year'</span><span class="token punctuation">]</span></span>){{ <span class="token interpolation"><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_year'</span><span class="token punctuation">]</span></span> }}@endisset&quot;</span><span class="token operator">&gt;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;form-input&quot;</span> type<span class="token operator">=</span><span class="token double-quoted-string string">&quot;number&quot;</span> name<span class="token operator">=</span><span class="token double-quoted-string string">&quot;book_pages&quot;</span> 
value<span class="token operator">=</span><span class="token double-quoted-string string">&quot;@isset(<span class="token interpolation"><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_pages'</span><span class="token punctuation">]</span></span>){{ <span class="token interpolation"><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_pages'</span><span class="token punctuation">]</span></span> }}@endisset&quot;</span><span class="token operator">&gt;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;form-input&quot;</span> type<span class="token operator">=</span><span class="token double-quoted-string string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token double-quoted-string string">&quot;book_image&quot;</span> 
value<span class="token operator">=</span><span class="token double-quoted-string string">&quot;@isset(<span class="token interpolation"><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_image'</span><span class="token punctuation">]</span></span>){{ <span class="token interpolation"><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_image'</span><span class="token punctuation">]</span></span> }}@endisset&quot;</span><span class="token operator">&gt;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&lt;</span>textarea <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;form-input&quot;</span> name<span class="token operator">=</span><span class="token double-quoted-string string">&quot;book_description&quot;</span><span class="token operator">&gt;</span>
@<span class="token function">isset</span><span class="token punctuation">(</span><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_description'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_description'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>@endisset
<span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">&gt;</span>
</code></pre></div><div class="warning custom-block"><p class="custom-block-title">Note</p> <p>Category has not been updated because we do not have the category data.</p></div> <h3 id="retrieving-the-book-s-category"><a href="#retrieving-the-book-s-category" aria-hidden="true" class="header-anchor">#</a> Retrieving the Book's Category</h3> <h4 id="_1-open-book-php-in-the-app-directory-3"><a href="#_1-open-book-php-in-the-app-directory-3" aria-hidden="true" class="header-anchor">#</a> 1. Open <code>Book.php</code> in the <code>app/</code> directory</h4> <h4 id="_2-create-a-category-method"><a href="#_2-create-a-category-method" aria-hidden="true" class="header-anchor">#</a> 2. Create a <code>category</code> method</h4> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token variable">$fillable</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'book_title'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'book_year'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'book_pages'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'book_image'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'book_description'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'category_id'</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token variable">$timestamps</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">quotes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasMany</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'App\Quote'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">category</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><h4 id="_3-define-the-relationship-2"><a href="#_3-define-the-relationship-2" aria-hidden="true" class="header-anchor">#</a> 3. Define the Relationship</h4> <p>Return the <code>belongsTo()</code> method passing the parameter <code>'App\Category'</code>.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br></div><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">category</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">belongsTo</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'App\Category'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_4-open-bookcontroller-php-in-the-app-http-controllers-directory"><a href="#_4-open-bookcontroller-php-in-the-app-http-controllers-directory" aria-hidden="true" class="header-anchor">#</a> 4. Open <code>BookController.php</code> in the <code>app/Http/Controllers</code> directory</h4> <h4 id="_5-update-edit-method"><a href="#_5-update-edit-method" aria-hidden="true" class="header-anchor">#</a> 5. Update <code>edit()</code> method</h4> <p>Update the edit method to retrieve the selected book's category as well as all categories. This will allow use to dynamically create the categories select menu. Send the category and categories data to the form view.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> edit <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$category</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">category</span><span class="token punctuation">;</span>
    <span class="token variable">$categories</span> <span class="token operator">=</span> Category<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'form'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Edit Book'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'book'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$book</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'bookCategory'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$category</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'categories'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$categories</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_6-open-form-blade-php-in-the-resources-views-directory"><a href="#_6-open-form-blade-php-in-the-resources-views-directory" aria-hidden="true" class="header-anchor">#</a> 6. Open <code>form.blade.php</code> in the <code>resources/views</code> directory</h4> <h4 id="_7-update-the-select-menu"><a href="#_7-update-the-select-menu" aria-hidden="true" class="header-anchor">#</a> 7. Update the select menu</h4> <p>Use <code>$bookCategory</code> preselect the correct option.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span>select <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;form-input&quot;</span> name<span class="token operator">=</span><span class="token double-quoted-string string">&quot;category_id&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>option<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
    @<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$categories</span> <span class="token keyword">as</span> <span class="token variable">$category</span><span class="token punctuation">)</span>
        <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token double-quoted-string string">&quot;{{ <span class="token interpolation"><span class="token variable">$category</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">]</span></span> }}&quot;</span>
            @<span class="token function">isset</span><span class="token punctuation">(</span><span class="token variable">$bookCategory</span><span class="token punctuation">)</span>
                @<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$category</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token variable">$bookCategory</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                selected<span class="token operator">=</span><span class="token double-quoted-string string">&quot;selected&quot;</span>
                @<span class="token keyword">endif</span>
            @endisset
        <span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$category</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'category_name'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
    @<span class="token keyword">endforeach</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
</code></pre></div><h3 id="updating-the-book"><a href="#updating-the-book" aria-hidden="true" class="header-anchor">#</a> Updating the Book</h3> <p>Now, that we are displaying all of the book's data in the form, we do set up our application to process any change that we make to the data.</p> <h4 id="_1-open-web-php-in-the-routes-directory-6"><a href="#_1-open-web-php-in-the-routes-directory-6" aria-hidden="true" class="header-anchor">#</a> 1. Open <code>web.php</code> in the <code>routes</code> directory</h4> <h4 id="_2-add-a-new-route"><a href="#_2-add-a-new-route" aria-hidden="true" class="header-anchor">#</a> 2. Add a new route</h4> <p>Add a new route using the <code>post()</code> method. The URL should be <code>/edit/{id}</code> and it should point to <code>store()</code> method of the <code>BooksController</code></p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/edit/{id}'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'BooksController@update'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_3-open-bookscontroller-php-in-the-app-http-controllers"><a href="#_3-open-bookscontroller-php-in-the-app-http-controllers" aria-hidden="true" class="header-anchor">#</a> 3. Open <code>BooksController.php</code> in the <code>app/Http/Controllers/</code></h4> <h4 id="_4-add-the-update-method"><a href="#_4-add-the-update-method" aria-hidden="true" class="header-anchor">#</a> 4. Add the <code>update</code> method</h4> <p>Create an the <code>update</code> method with two parameters, the request data <code>Request $request</code> and the <code>Book $book</code> data.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br></div><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Book</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Category</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">BooksController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> index <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$books</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'books'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'books'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$books</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> show <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$quotes</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">quotes</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'book'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'book'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$book</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'quotes'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$quotes</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$categories</span> <span class="token operator">=</span> Category<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'form'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Add Book'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'categories'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$categories</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> store <span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;/edit/<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> edit <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$category</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">category</span><span class="token punctuation">;</span>
        <span class="token variable">$categories</span> <span class="token operator">=</span> Category<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'form'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
            <span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Edit Book'</span><span class="token punctuation">,</span>
            <span class="token single-quoted-string string">'book'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$book</span><span class="token punctuation">,</span>
            <span class="token single-quoted-string string">'bookCategory'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$category</span><span class="token punctuation">,</span>
            <span class="token single-quoted-string string">'categories'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$categories</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> update <span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token variable">$id</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
       
    <span class="token punctuation">}</span>

 <span class="token punctuation">}</span>

</span></code></pre></div><h4 id="_5-update-the-data"><a href="#_5-update-the-data" aria-hidden="true" class="header-anchor">#</a> 5. Update the data</h4> <p>Find the book using the <code>$id</code> and update the data with the <code>$request</code> using the <code>update()</code> method.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br></div><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> update <span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">,</span> Book <span class="token variable">$book</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_6-return-the-edit-method"><a href="#_6-return-the-edit-method" aria-hidden="true" class="header-anchor">#</a> 6. Return the edit method</h4> <p>To display the edit book form again, return the <code>edit()</code> passing the <code>$id</code>. Use <code>$this</code> to access the method.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> update <span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">,</span> Book <span class="token variable">$book</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">edit</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="deleting-existing-data"><a href="#deleting-existing-data" aria-hidden="true" class="header-anchor">#</a> Deleting Existing Data</h2> <h3 id="deleting-a-book"><a href="#deleting-a-book" aria-hidden="true" class="header-anchor">#</a> Deleting a Book</h3> <h4 id="_1-open-web-php-from-the-routes-directory"><a href="#_1-open-web-php-from-the-routes-directory" aria-hidden="true" class="header-anchor">#</a> 1. Open <code>web.php</code> from the <code>routes</code> directory</h4> <h4 id="_2-add-the-delete-route"><a href="#_2-add-the-delete-route" aria-hidden="true" class="header-anchor">#</a> 2. Add the delete route</h4> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/delete/{id}'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'BooksController@delete'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_3-open-bookscontroller-php-from-the-app-http-controllers-directory"><a href="#_3-open-bookscontroller-php-from-the-app-http-controllers-directory" aria-hidden="true" class="header-anchor">#</a> 3. Open <code>BooksController.php</code> from the <code>app/Http/Controllers</code> directory</h4> <h4 id="_4-add-the-delete-method"><a href="#_4-add-the-delete-method" aria-hidden="true" class="header-anchor">#</a> 4. Add the <code>delete()</code> method</h4> <p>Create the <code>delete()</code> method with the parameter <code>$id</code></p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Book</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Category</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">BooksController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> index <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$books</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'books'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'books'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$books</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> show <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$quotes</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">quotes</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'book'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'book'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$book</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'quotes'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$quotes</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$categories</span> <span class="token operator">=</span> Category<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'form'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Add Book'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'categories'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$categories</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> store <span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;/edit/<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> edit <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$category</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">category</span><span class="token punctuation">;</span>
        <span class="token variable">$categories</span> <span class="token operator">=</span> Category<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'form'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
            <span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Edit Book'</span><span class="token punctuation">,</span>
            <span class="token single-quoted-string string">'book'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$book</span><span class="token punctuation">,</span>
            <span class="token single-quoted-string string">'bookCategory'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$category</span><span class="token punctuation">,</span>
            <span class="token single-quoted-string string">'categories'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$categories</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> update <span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token variable">$id</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">edit</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> delete <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span> 
    <span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</span></code></pre></div><h4 id="_5-find-the-book"><a href="#_5-find-the-book" aria-hidden="true" class="header-anchor">#</a> 5. Find the book</h4> <p>Using <code>Book::find</code> find the selected book and save the data to the <code>$book</code> variable.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br></div><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> delete <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_6-delete-the-book"><a href="#_6-delete-the-book" aria-hidden="true" class="header-anchor">#</a> 6. Delete the book</h4> <p>Delete the book using the <code>delete()</code> method of <code>$book</code></p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> delete <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$book</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_7-return-the-delete-view"><a href="#_7-return-the-delete-view" aria-hidden="true" class="header-anchor">#</a> 7. Return the delete view</h4> <p>Return the delete view, passing the book title to the view.</p> <div class="language-php extra-class"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> delete <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token variable">$book</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$book</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'delete'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$book</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'book_title'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/8.531b62ae.js" defer></script><script src="/assets/js/app.51be034c.js" defer></script>
  </body>
</html>
